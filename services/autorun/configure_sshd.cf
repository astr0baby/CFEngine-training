bundle agent configure_sshd
{
services:
"ssh";

files: 
debian:: 
"/etc/ssh/sshd_config"
comment => "Allow direct root login for test",
edit_line => replace_or_add(".*PermitRootLogin.*","PermitRootLogin no");


centos_6:: 
"/etc/ssh/sshd_config"
comment => "Allow direct root login for test",
edit_line => replace_or_add(".*PermitRootLogin.*","PermitRootLogin no");
}

bundle edit_line set_rsa_key 

{
delete_line:
"/root/.ssh/id_rsa.pub"
create => "true",
edit_line => set_rsa_key;

    ".*";

insert_lines:
"ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC2aNHs7RyufnexI3Ngw1a0bCsB1jhDMBF/dsf3p2WWtAgKiLcW/2YJDADjDfOXiRKTvYVu6ig4Iu9wSRwbBg3bhBzL4GHY+rlyURt+Ti+EwXH71FZUzguGGC58fLA2dtISskp09Anzfj2kVGXdj8aluEQSTswG8w1xZCF6Ayf8yNj/aivh5xdzY7DNUA++C432QvZ7a/R5bG2npGOUA3UJiWVHOa8G2oVy+/8AaAJlQ9ITUfxTJxnt2st38y+Vfa/8+cdUm1s8NPdtuVqigd4zd1KcKsBooBwFqKjY+e3OPyxqTExFe3nCE8HHKhWfOaCOVh126tttCLrFgXtFoFVH";

}
reports:
"$(this.bundle): set /root/.ssh/id_rsa.pub key";


